# 5️⃣9️⃣ Item 59 : 라이브러리를 익히고 사용하라

<br>

## 📌 목차
1. 문제 개요
2. 문제점
3. 해결책
4. 표준 라이브러리 사용 이점
5. 팁
6. 결론

<br>

## ⚠ 문제 개요

`0~n까지 사이의 무작위 정수 하나를 생성`하고 싶다. 

그래서 아래와 같은 코드를 작성했다. 

```java
static Random rnd = new RandomM();

static int random(int n){
	return Math.abs(rnd.nextInt()) % n;
}
```

<br>

## ‼ 문제점

코드가 괜찮아 보이지만 `문제점`이 많이 있다. 

<br>


**`첫번째 문제점:`**

>n이 그리 크지 않은 2의 제곱수라면 얼마 지나지 않아 `같은 수열이 반복`된다. 

<br>

**`두번째 문제점:`** 

>n이 2의 제곱수가 아니라면 `몇몇 숫자가 평균적으로 더 자주 반환`된다.
>
>n 값이 크면 이 현상이 더 두드러지게 나타난다. 

<br>

**`세번째 문제점 :` **

>`지정한 범위 바깥의 수`가 종종 튀어나올 수 있다. 
>
>rnd.nextInt()가 Integer.MIN_VALUE를 반환하면 Math.abs도 Integer.MIN_VALUE 반환한다. 
>
>그러면 나머지 연산자 = %는 음수를 반환한다. 

<br>

이런 문제점이 발생하면 프로그램이 실패한다. 

그리고 문제를 해결하고 싶어도 현상을 재현하기 쉽지 않다. 

<br>

## 📁 해결책

이런 문제를 해결하려면 다음과 같은 것에 `조예가 깊어서 직접 아주 잘 구현`해야 한다. 

- 의사난수 생성기
- 정수론
- 2의 보수 계산
- ….

<br>

보기만해도 어지럽고 이런 것에 조예가 깊어지려고 개발자가 된 것은 아니다. 

다행히 우리가 위의 것들을 `깊게 이해해서 직접 해결할 필요가 없다`. 

<br>

표준 라이브러리를 사용`하면 된다. 
`
Random.nextInt(int)라는 표준 라이브러리가 이미 해결해 놨다. 

<br>

팁으로 자바 7부터는 `Random을 더이상 사용하지 않는 것이 좋다`고 한다. 

`ThreadLocalRandom으로 대체`하면 대부분 잘 작동한다고 한다. 

Random보다 더 고품질의 무작위 수를 생성할 뿐 아니라 속도도 더 빠르다고 한다. 

한편 포크-조인 풀이나 병렬 스트림에서는 SplittableRandom을 사용하라고 한다. 

<br>

그렇다면 `어떤 이점이 있길래` 표준 라이브러리를 사용하라고 하는 것일까?

한번 알아보자. 

<br>

## 👍 표준 라이브러리 사용 이점

### 1️⃣ 이점 1

표준 라이브러리를 사용하면 그 코드를 작성한 `전문가의 지식과 앞서 사용한 다른 프로그래머들의 경험을 활용`할 수 있다. 

>알고리즘에 능통한 개발자가 설계와 구현과 검증에 시간을 들여 개발했다. 
>
>이 분야의 여러 전문가가 잘 동작함을 검증했다. 
>
>라이브러리가 릴리스된 후 20여년 가까이 수백만의 개발자가 열심히 사용했지만 버그가 보고된 적이 없다. 
>
>버그 발견되더라도 다음 릴리스에서 수정될 것이다. 

<br>

### 2️⃣ 이점 2

`핵심적인 일과 크게 관련없는 문제를 해결하느라 시간을 허비`하지 않아도 된다. 

>프로그래머들은 의사난수 생성기 이런 것처럼 하부 공사하기보다는 어플리케이션 기능 개발에 집중하고 싶어한다. 

<br>

### 3️⃣ 이점 3

따로 노력하지 않아도 `성능이 지속해서 개선`된다. 

>사용자가 많고 업계 표준 벤치마크를 사용해 성능을 확인한다. 
>
>그렇기 때문에 표준 라이브러리 제작자들은 더 나은 방법을 꾸준히 모색한다. 

<br>

### 4️⃣ 이점 4

`기능이 점점 많아진다`. 

>라이브러리에 부족한 부분이 있다면 개발자 커뮤니티에서 이야기가 나온다. 
>
>그리고 논의된 후 다음 릴리스에 해당 기능이 추가되기도 한다. 

<br>

### 5️⃣ 이점 5

라이브러리를 사용해 작성한 코드는 `많은 사람에게 낯익은 코드`가 된다. 

>많은 사람이 라이브러리를 사용하니 자연스럽게 다른 개발자들이 더 읽기 좋아진다. 
>
>그리고 유지보수하기 좋고 재활용하기 쉬운 코드가 된다. 

<br>

## ✅ 팁

### 1️⃣ 팁 1

라이브러리에 `메이저 릴리스마다 주목할만한 수많은 기능이 라이브러리에 추가`된다. 

>많은 프로그래머들이 라이브러리에 필요한 기능이 있는지 몰라 직접 구현해서 쓰는 경우가 많다. 
>
>자바는 메이저 릴리스마다 새로운 기능을 설명하는 웹페이지 공시하는데 한 번쯤 읽어볼 만하다. 
>
>따라서 메이저 릴리스의 주목할만한 기능은 한 번쯤 읽어보자. 

<br>

### 2️⃣ 팁 2

자바 프로그래머라면 적어도 `java.lang, java.util, java.io와 그 하위 패키지들에는 익숙`해져야 한다. 

>라이브러리가 너무 방대해 모든 API 문서 공부하기는 어렵지만 위의 것들은 익숙해지면 좋다. 
>
>다른 라이브러리들은 필요할 때마다 익히면 된다. 
>
>컬렉션 프레임워크, 스트림 라이브러리와 java.util.concurrent의 동시성 기능도 알고 있으면 좋다. 

<br>

### 3️⃣ 팁 3

`우선 라이브러리를 사용하려고 시도`해보자. 

>전문적인 기능을 요구할수록 라이브러리가 필요한 기능을 충분히 제공하지 못할 수 있다. 
>
>그래도 최대한 라이브러리를 사용하려고 시도해보자. 
>
>자바 표준 라이브러리에서 원하는 기능을 찾지 못하면 고품질의 서드파티 라이브러리를 사용해보자.
>
>적합한 서드파티 라이브러리도 찾지 못했다면 직접 구현해야 한다. 
.
>자바 표준 라이브러리 → 서드파티 라이브러리 → 직접 구현

<br>

## ‼ 결론

아주 특별한 나만의 기능이 아니면 `누군가 이미 라이브러리 형태로 구현해 놓았을 가능성`이 크다. 

그런 라이브러리가 `있다면 쓰면 되고 있는지 잘 모르겠다면 찾아보면 된다`. 

라이브러리의 코드는 `직접 작성한 것보다 품질이 좋고 점차 개선될 가능성`이 크다.